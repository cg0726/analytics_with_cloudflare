(function(){console.info('welcome to WebViso/yestool，author：YesTool，author url: https://webviso.yestool.org');var script=document.currentScript,dataBaseUrl=script.getAttribute('data-base-url'),dataPagePvId=script.getAttribute('data-page-pv-id'),dataPageUvId=script.getAttribute('data-page-uv-id'),WebViso={},BASE_API_PATH='https://webviso.yestool.org',fetchJson=function(url,data){return new Promise(function(resolve){fetch(url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(data)}).then(function(res){return res.json()}).then(function(data){resolve(data)}).catch(function(err){console.error(err)})})},getLocation=function(href){var l=document.createElement("a");l.href=href;return l};WebViso.version='0.0.0',WebViso.page_pv_id="page_pv",WebViso.page_uv_id="page_uv",dataBaseUrl&&(BASE_API_PATH=dataBaseUrl),dataPagePvId&&(WebViso.page_pv_id=dataPagePvId),dataPageUvId&&(WebViso.page_uv_id=dataPageUvId),WebViso.init=async function(){var thisPage=getLocation(window.location.href),pagePvEle=document.getElementById(WebViso.page_pv_id),pageUvEle=document.getElementById(WebViso.page_uv_id),queryData={url:thisPage.pathname,hostname:thisPage.hostname,referrer:document.referrer};pagePvEle&&(queryData.pv=!0),pageUvEle&&(queryData.uv=!0);await fetchJson(`${BASE_API_PATH}/api/visit`,queryData).then(function(res){if(res.ret!="OK"){console.error('WebViso.init error',res.message);return}var resData=res.data;pagePvEle&&(pagePvEle.innerText=resData.pv),pageUvEle&&(pageUvEle.innerText=resData.uv)}).catch(function(err){console.log("WebViso.init fetch error",err)})},typeof window!='undefined'&&(WebViso.init(),window.WebViso=WebViso)})();